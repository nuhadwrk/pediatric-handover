

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pediatric Handover System</title>
  <style>

/* ===== Sleek Modern Styling (keeps original IDs & classes) ===== */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

:root{
  --bg:#f4f7fb;
  --primary:#0066cc;
  --primary-dark:#004a99;
  --accent:#2a9d8f;
  --text:#1d3557;
  --card-bg:#ffffff;
  --shadow:0 4px 12px rgba(0,0,0,0.08);
}

*{box-sizing:border-box;font-family:'Inter',sans-serif}

body{margin:0;padding:24px;background:var(--bg);color:var(--text)}

h1{margin:0 0 24px;text-align:center;font-weight:700}

.top-buttons{text-align:center;margin-bottom:32px}
.top-buttons button{
  margin:6px;padding:10px 20px;font-weight:600;border:none;border-radius:8px;cursor:pointer;
  transition:background .2s,transform .2s;
}
.top-buttons button:hover{transform:translateY(-2px)}
.top-buttons .add{background:var(--primary);color:#fff}
.top-buttons .add:hover{background:var(--primary-dark)}
.top-buttons .print{background:var(--accent);color:#fff}
.top-buttons .print:hover{background:#1f7b72}

#handoverHeader{max-width:680px;margin:0 auto 32px;text-align:center;background:var(--card-bg);
  padding:18px;border-radius:12px;box-shadow:var(--shadow)}

.form-section{display:none;background:var(--card-bg);padding:24px;border-radius:12px;
  max-width:520px;margin:0 auto 48px;box-shadow:var(--shadow)}
.form-section input,.form-section select,.form-section textarea{
  width:100%;margin:6px 0 12px;padding:10px;border:1px solid #ccc;border-radius:8px;font-size:14px;
}
.form-section button{width:100%;padding:12px;background:var(--primary);color:#fff;border:none;border-radius:8px;font-weight:600}

.card-grid{display:flex;flex-wrap:wrap;gap:18px;justify-content:center}
.patient-card{background:var(--card-bg);width:300px;padding:18px;border-radius:12px;box-shadow:var(--shadow);
  position:relative;transition:transform .18s}
.patient-card:hover{transform:scale(1.015)}
.patient-card h3{margin:0 0 8px;font-size:18px;color:var(--primary-dark)}
.patient-card p{margin:4px 0}

.delete-btn{position:absolute;top:10px;right:10px;background:#e63946;color:#fff;border:none;border-radius:4px;
  padding:4px 8px;cursor:pointer;font-size:12px}
.delete-btn:hover{opacity:0.85}

@media(max-width:768px){
  .card-grid{flex-direction:column;align-items:center}
  .patient-card{width:90%}
}

</style>
</head>
<body>
  <h1>Pediatric Handover</h1>
  <div class="top-buttons">
    <button onclick="document.getElementById('formSection').style.display='block'">Add Patient</button>
    <button onclick="printHandover()">üñ®Ô∏è Print</button>
  </div>

  <div id="handoverHeader">
    <strong>Date:</strong> <span id="handoverDate"></span>
  </div>

  <div class="form-section" id="formSection" style="display:none;">
    <input type="text" id="name" placeholder="Name" required />
    <input type="text" id="id" placeholder="ID" required />
    <input type="text" id="bed" placeholder="Bed" required />
    <input type="text" id="age" placeholder="Age" required />
    <select id="sex">
      <option value="Male">Male</option>
      <option value="Female">Female</option>
    </select>
    <input type="text" id="diagnosis" placeholder="Diagnosis" />
    <input type="text" id="medications" placeholder="Medications" />
    <select id="ward">
      <option value="PW">PW</option>
      <option value="GW">GW</option>
      <option value="SW">SW</option>
      <option value="PVT">PVT</option>
      <option value="ICU">ICU</option>
      <option value="NICU">NICU</option>
    </select>
    <textarea id="plan" placeholder="Plan"></textarea>
    <button onclick="addPatient()">Submit</button>
  </div>

  <div id="wardsContainer">
    <div class="card-grid" id="patientCards"></div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyC3_DD-ezlWahQeCdPLcFh_lohLn63Q7eY",
      authDomain: "pediatric-handover.firebaseapp.com",
      projectId: "pediatric-handover",
      storageBucket: "pediatric-handover.appspot.com",
      messagingSenderId: "104007714087",
      appId: "1:104007714087:web:77811513530b0ee9859502"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    document.getElementById("handoverDate").innerText = new Date().toISOString().split("T")[0];

    function addPatient() {
      const patient = {
        name: document.getElementById("name").value,
        id: document.getElementById("id").value,
        bed: document.getElementById("bed").value,
        age: document.getElementById("age").value,
        sex: document.getElementById("sex").value,
        diagnosis: document.getElementById("diagnosis").value,
        medications: document.getElementById("medications").value,
        ward: document.getElementById("ward").value,
        plan: document.getElementById("plan").value,
        timestamp: Date.now()
      };

      db.collection("patients").add(patient)
        .then(() => {
          document.getElementById("formSection").style.display = "none";
          loadPatients(); // Reload after save
        })
        .catch((error) => {
          console.error("Error adding patient:", error);
          alert("Failed to save patient");
        });
    }

    function loadPatients() {
      const container = document.getElementById("patientCards");
      container.innerHTML = "";
      db.collection("patients").orderBy("timestamp", "desc").get().then((querySnapshot) => {
        querySnapshot.forEach((doc) => {
          const data = doc.data();
          const card = document.createElement("div");
          card.className = "patient-card";
          card.innerHTML = `
            <button class="delete-btn" onclick="deletePatient('${doc.id}')">Delete</button>
            <p><strong>${data.name}</strong> (ID: ${data.id})</p>
            <p>Bed: ${data.bed}</p>
            <p>Age: ${data.age}</p>
            <p>Sex: ${data.sex}</p>
            <p>Diagnosis: ${data.diagnosis}</p>
            <p>Medications: ${data.medications}</p>
            <p>Plan: ${data.plan}</p>
            <p>Ward: ${data.ward}</p>
          `;
          container.appendChild(card);
        });
      });
    }

    function deletePatient(id) {
      db.collection("patients").doc(id).delete().then(loadPatients);
    }

    function printHandover() {
      window.print();
    }

    loadPatients();
  </script>
</body>
</html>
